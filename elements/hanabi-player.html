<link rel="import" href="../bower_components/polymer/polymer.html">

<dom-module id="hanabi-player">
  <style>
    :host {
      border: black 3px solid;
      display: block;
      height: 175px;
      width: 750px;
    }

    :host[current-player] {
      background-color: yellow;
    }

    div {
      display: flex;
    }
  </style>

  <template>
    <div>
      <template is="dom-repeat" items="{{cards}}" id="cards">
        <hanabi-card color="{{item.color}}" value="{{item.value}}" unknownColor="{{item.unknownColor}}"></hanabi-card>
      </template>
    </div>

    <div>
      <hanabi-reveal type="color"></hanabi-reveal>
      <hanabi-reveal type="value"></hanabi-reveal>
    </div>
  </template>

  <script>
    Polymer({
      is: "hanabi-player",

      properties: {
        currentPlayer: {
          type: Boolean,
          reflectToAttribute: true
        },
        cards: {
          type: Array
        }
      },

      revealListener: function(type, value) {
        console.log(type, value, " has been revealed.");

        var i = 0;

        var that = this;

        this.cards.forEach(function(card) {
          if (card[type] == value) {
            that.set("cards." + i + ".unknown" + type.charAt(0).toUpperCase() + type.slice(1), false);
          }

          i++;
        });

        console.log(this.cards);
      }
    });
  </script>
</dom-module>
